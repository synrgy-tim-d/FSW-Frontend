import React from 'react';
import { Link } from 'react-router-dom';

const Detailkos = ({ fetchData, fetchReview }) => {
  let totalRating = 0

  for (let i = 0; i < fetchReview.length; i++) {
    totalRating += fetchReview[i].rating;
  }
 
  const ratingAverage = totalRating/fetchReview.length;
  return (
    <React.Fragment>
      <div className='grid gap-4'>
        <p className='flex text-[39px] font-[700]'>
          {fetchData?.name}
          <span className='ml-4 py-3 px-3 border-2 border-[#0A008A] rounded-[70px] text-[20px] font-[600]'>
            {fetchData?.kostType?.slice(4)}
          </span>
        </p>
        <p className='text-[39px] font-[700] self-center'>Tipe Kamar {fetchData?.rooms[0]?.roomType?.replace(/_/g, ' ').toLowerCase().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')} {fetchData?.city?.city}</p>
        <p className='text-[20px]'>
          {fetchData?.address}, {fetchData?.subdistrict}, {fetchData?.district}, {fetchData?.city?.city}, {fetchData?.city?.province?.province} ({fetchData?.postalCode})
        </p>
        <div className='grid grid-flow-col gap-4'>
          <div className='grid grid-flow-col auto-cols-max gap-2 content-center'>
            <span className='self-center'>
              <svg
                width='12'
                height='12'
                viewBox='0 0 12 12'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
              >
                <path
                  d='M5.23196 0.582073C5.47408 -0.194024 6.52571 -0.194024 6.76703 0.582073L7.63061 3.35614C7.68337 3.52508 7.78593 3.67229 7.92363 3.77672C8.06134 3.88114 8.22714 3.93745 8.39733 3.93758H11.1914C11.9735 3.93758 12.298 4.98249 11.666 5.46281L9.40618 7.1768C9.2682 7.28131 9.16545 7.42876 9.11268 7.59801C9.0599 7.76725 9.05981 7.9496 9.11241 8.1189L9.97598 10.893C10.2181 11.6691 9.36664 12.3154 8.73308 11.8351L6.47325 10.1211C6.33541 10.0166 6.16943 9.96032 5.99909 9.96032C5.82875 9.96032 5.66277 10.0166 5.52493 10.1211L3.2651 11.8351C2.63235 12.3154 1.78169 11.6691 2.023 10.893L2.88658 8.1189C2.93918 7.9496 2.93909 7.76725 2.88631 7.59801C2.83354 7.42876 2.73079 7.28131 2.5928 7.1768L0.333783 5.46365C-0.298162 4.98333 0.0270921 3.93842 0.808347 3.93842H3.60166C3.77199 3.93847 3.93797 3.88225 4.07583 3.77781C4.2137 3.67337 4.31639 3.52606 4.36919 3.35698L5.23196 0.582073Z'
                  fill='#FFBA2C'
                />
              </svg>
            </span>
            <span>{isNaN(ratingAverage) ? 0 : ratingAverage}</span>
            <span>({fetchReview.length} reviews)</span>
            <span className='self-center'>
              <svg
                width='12'
                height='15'
                viewBox='0 0 12 15'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
              >
                <path
                  fillRule='evenodd'
                  clipRule='evenodd'
                  d='M1.75747 2.01515C2.88267 0.889947 4.40878 0.257813 6.00006 0.257812C7.59135 0.257813 9.11745 0.889947 10.2427 2.01515C11.3679 3.14036 12 4.66647 12 6.25775C12 7.84903 11.3679 9.37514 10.2427 10.5003L6.00006 14.7429L1.75747 10.5003C1.20029 9.94322 0.758301 9.2818 0.456753 8.55385C0.155205 7.8259 0 7.04568 0 6.25775C0 5.46981 0.155205 4.6896 0.456753 3.96165C0.758301 3.2337 1.20029 2.57228 1.75747 2.01515ZM6.00006 7.97193C6.45469 7.97193 6.8907 7.79133 7.21217 7.46986C7.53364 7.14839 7.71424 6.71238 7.71424 6.25775C7.71424 5.80312 7.53364 5.36711 7.21217 5.04564C6.8907 4.72417 6.45469 4.54357 6.00006 4.54357C5.54543 4.54357 5.10943 4.72417 4.78796 5.04564C4.46648 5.36711 4.28588 5.80312 4.28588 6.25775C4.28588 6.71238 4.46648 7.14839 4.78796 7.46986C5.10943 7.79133 5.54543 7.97193 6.00006 7.97193Z'
                  fill='#0A008A'
                />
              </svg>
            </span>
            <Link to={`https://www.google.com/maps/dir//@${fetchData?.latitude},${fetchData?.longitude}`}>
              <span>{fetchData?.city?.city}</span>
            </Link>
          </div>
          <div className='grid grid-flow-col auto-cols-max gap-4 justify-end'>
            <div className='grid grid-flow-col gap-2 border-2 border-[#0A008A] radius-[4px] text-[#0A008A] font-[600] p-2'>
              <span>
                <svg
                  width='24'
                  height='24'
                  viewBox='0 0 24 24'
                  fill='none'
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <path
                    d='M21 8.25C21 5.76472 18.9013 3.75 16.3125 3.75C14.3769 3.75 12.7153 4.87628 12 6.48342C11.2847 4.87628 9.62312 3.75 7.6875 3.75C5.09867 3.75 3 5.76472 3 8.25C3 15.4706 12 20.25 12 20.25C12 20.25 21 15.4706 21 8.25Z'
                    stroke='#0A008A'
                    strokeWidth='1.5'
                    strokeLinecap='round'
                    strokeLinejoin='round'
                  />
                </svg>
              </span>
              Simpan
            </div>
            <div className='grid grid-flow-col gap-2 border-2 border-[#0A008A] radius-[4px] text-[#0A008A] font-[600] p-2'>
              <span>
                <svg
                  width='24'
                  height='24'
                  viewBox='0 0 24 24'
                  fill='none'
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <path
                    d='M7.21721 10.9071C6.83295 10.2169 6.096 9.75 5.25 9.75C4.00736 9.75 3 10.7574 3 12C3 13.2426 4.00736 14.25 5.25 14.25C6.096 14.25 6.83295 13.7831 7.21721 13.0929M7.21721 10.9071C7.39737 11.2307 7.5 11.6034 7.5 12C7.5 12.3966 7.39737 12.7693 7.21721 13.0929M7.21721 10.9071L16.7828 5.5929M7.21721 13.0929L16.7828 18.4071M16.7828 18.4071C16.6026 18.7307 16.5 19.1034 16.5 19.5C16.5 20.7426 17.5074 21.75 18.75 21.75C19.9926 21.75 21 20.7426 21 19.5C21 18.2574 19.9926 17.25 18.75 17.25C17.904 17.25 17.1671 17.7169 16.7828 18.4071ZM16.7828 5.5929C17.1671 6.28309 17.904 6.75 18.75 6.75C19.9926 6.75 21 5.74264 21 4.5C21 3.25736 19.9926 2.25 18.75 2.25C17.5074 2.25 16.5 3.25736 16.5 4.5C16.5 4.89664 16.6026 5.26931 16.7828 5.5929Z'
                    stroke='#0A008A'
                    strokeWidth='1.5'
                    strokeLinecap='round'
                    strokeLinejoin='round'
                  />
                </svg>
              </span>
              Bagikan
            </div>
          </div>
        </div>
      </div>
    </React.Fragment>
  );
};

export default Detailkos;
